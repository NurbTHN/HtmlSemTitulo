<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title id="title">Html Sem Título</title>
  <link rel="icon" type="image/png" href="Imagens/Favicon.png">
</head>
<body style="scale: 100%; background-color: black; text-align: center;" text="White">
  <br><br><br><br><br><br><br>
  <font size="7"><b><a id="int1" style="color: #121212;">?</a>Html Sem Título<a id="int2" style="color: #121212;">?</a></b></font>
  <br><br><br>

  <div>
    <img id="tela" src="" usemap="" height="540px">

    <video id="telanim">
      <source src="" onended="" type="video/mp4" autoplay muted>
    </video>
  </div><br>

  <p id="conteudodica">Dica: Nem todas as coisas estão apenas na imagem</p><br>

  <input id="skipar" type="image" src="Imagens/skipbutton.png" height="50px" onclick="skipin(event)"><br><br>
  <input align="right" type="button" value="Reportar Um Bug" onclick="window.open('formulario.html', '_self')">
  <!--<input type="button" onclick="proxfase(event)">-->
  <audio id="muiscafundo" loop>
    <source src="Imagens/MusicaFundoCut.m4a" type="audio/mp3">
  </audio>

  <map name="menu-map">
    <area target="" alt="Jogar" title="Jogar" style="cursor: pointer;" onclick="comecarintro(event)" coords="266,422,0,382" shape="rect">
    <area target="" alt="Sobre / Extras" title="Sobre / Extras" style="cursor: pointer;" onclick="clicaritemmesa(event)" coords="267,471,0,433" shape="rect">
  </map>

  <map name="porta-map">
    <area target="" alt="Entrar" style="cursor: pointer;" onclick="proxfase(event)" title="Entrar" coords="343,182,516,524" shape="rect">
  </map>

  <map name="room1-map">
    <area target="" alt="Carta" title="Carta" style="cursor: pointer;" onclick="clicaritemmesa(event); " coords="528,276,574,277,578,334,531,334" shape="poly">
    <area target="" alt="" title="Entrar" style="cursor: pointer;" onclick="proxfase(event)" coords="168,200,298,462" shape="rect">
  </map>

  <map name="room1papel-map">
    <area target="" alt="Voltar" title="Voltar" style="cursor: pointer;" onclick="clicarvoltar(event)" coords="246,457,296,488" shape="rect">
  </map>

  <map name="room2-map">
    <area id="porta2id" target="" alt="" style="cursor: not-allowed;" onclick="testarfase(event)" coords="168,200,298,462" shape="rect">
    <area id="chavosa1" target="" alt="Chave" title="Chave" style="cursor: pointer;" onclick="clicaritemmesa(event)" coords="538,317,580,342" shape="rect">
  </map>

  <map name="room2pop-map">
    <area target="" alt="" title="Continuar" style="cursor: pointer;" onclick="clicarvoltar(event)" coords="573,461,615,488" shape="rect">
  </map>

  <map name="room3-map">
    <area target="" alt="" style="cursor: not-allowed;" title="Trancado" coords="168,200,298,462" shape="rect">
    <area target="" style="cursor: auto;" alt="" onclick="proxfase(event)" onmouseover="" coords="422,356,435,495" shape="rect">
  </map>

  <map name="room4-map">
    <area id="porta4id" target="" alt="" style="cursor: auto;" onclick="testarfase(event)" title="" coords="168,200,298,462" shape="rect">
    <area id="interruptor" target="" alt="" style="cursor: help;" onclick="clicaritemmesa(event)" title="Ligar" onclick="" coords="736,155,759,191" shape="rect">
  </map>

  <map name="roomend-map">
    <area target="" title="Computador" style="cursor: pointer;" onclick="comecarintro2(event)" coords="408,268,452,306" shape="rect">
  </map>

  <map name="certeza-map">
      <area target="" alt="" title="Não" style="cursor: pointer;" onclick="clicarvoltar(event)" coords="246,457,296,488" shape="rect">
      <area target="" alt="" title="Sim" style="cursor: pointer;" onclick="window.open('sobre.html','_self');" coords="573,461,615,488" shape="rect">
  </map>

  <script>
    let tela = document.getElementById("tela");
    let telanim = document.getElementById("telanim");
    let titlelet = document.getElementById("title");
    let interrog1 = document.getElementById("int1");
    let interrog2 = document.getElementById("int2");
    let dica = document.getElementById("conteudodica");
    let porta2id = document.getElementById("porta2id");
    let porta4id = document.getElementById("porta4id");
    let interruptor = document.getElementById("interruptor");
    let skip = document.getElementById("skipar");
    let chave1 = document.getElementById("chavosa1");
    let musicfund = document.getElementById("muiscafundo");
    let fase = 0;
    let chave = 0;

    window.onload = function () {
      tela.style.display = interrog1.style.display = interrog2.style.display = dica.style.display = skip.style.display = "none";
      telanim.style.display = "initial";
      telanim.style.display = "none";
      tela.style.display = "initial";
      tela.src = "Imagens/Titulo.png";
      tela.setAttribute("usemap", "#menu-map");
    };

    function skipin(e) {
      if (fase == 0) {
        introcabo(event)
        telanim.pause()
        telanim.currentTime = 0;
      } else {
        introcabo2(event)
        telanim.pause()
        telanim.currentTime = 0;
      }
    }

    function comecarintro(e) {
      skip.style.display = "initial";
      tela.style.display = "none";
      telanim.style.display = "initial";
      telanim.src = "Imagens/Video/inicio.mp4";
      telanim.setAttribute("onended", "introcabo(event)");
      telanim.play()
      musicfund.play();
      musicfund.volume = "0.25";

    }

    function introcabo(e) {
      skip.style.display = "none";
      telanim.style.display = "none";
      tela.style.display = "initial";
      tela.src = "Imagens/IntroImagem.png";
      tela.setAttribute("usemap", "#porta-map");
      tela.setAttribute("onended", "");
    }

    function comecarintro2(e) {
      skip.style.display = "initial";
      tela.style.display = "none";
      telanim.style.display = "initial";
      telanim.src = "Imagens/Video/cenafinal.mp4";
      telanim.setAttribute("onended", "introcabo2(event)");
      telanim.play()
    }

    function introcabo2(e) {
      skip.style.display = "none";
      telanim.style.display = "none";
      tela.style.display = "initial";
      tela.src = "Imagens/Titulo.png";
      tela.setAttribute("usemap", "#menu-map");
      tela.setAttribute("onended", "");
      fase = 0;
    }

    function proxfase(e) {
      fase++;
      switch (fase) {
      case 1:
        tela.src = "Imagens/Room1.png";
        tela.setAttribute("usemap", "#room1-map");
        break;
      case 2:
        tela.src = "Imagens/Room2.png";
        tela.setAttribute("usemap", "#room2-map");
        porta2id.style.cursor = "not-allowed";
        chave1.style.cursor = "pointer";
        chave1.setAttribute("onclick", "clicaritemmesa(event)");
        break;
      case 3:
        interrog1.style.display = interrog2.style.display = dica.style.display = "initial";
        titlelet.innerHTML = "Clique na perna esquerda da mesa";
        tela.src = "Imagens/Room3.png";
        tela.setAttribute("usemap", "#room3-map");
        break;
      case 4:
        interrog1.style.display = interrog2.style.display = "none";
        dica.innerHTML = "Dica: Ache algo para ligar a luz";
        titlelet.innerHTML = "Html Sem Título";
        tela.src = "Imagens/Room4Escuro.png";
        tela.setAttribute("usemap", "#room4-map");
        porta4id.style.cursor = "auto";
        interruptor.style.cursor = "help";
        break;
      case 5:
        dica.style.display = "none";
        titlelet.innerHTML = "Html Sem Título";
        tela.src = "Imagens/RoomEnd.png";
        tela.setAttribute("usemap", "#roomend-map");
        break;
      default:
        alert("Jogo com bugs, por favor, reinicie a página");
        break;
      }
    }

    function clicaritemmesa(e) {
      switch (fase) {
        case 0:
          tela.src = "Imagens/Certeza.png";
          tela.setAttribute("usemap", "#certeza-map");
          break;
        case 1:
          tela.src = "Imagens/Room1Papel.png";
          tela.setAttribute("usemap", "#room1papel-map");
          break;
        case 2:
          tela.src = "Imagens/Room2conseguiste.png";
          tela.setAttribute("usemap", "#room2pop-map");
          porta2id.style.cursor = "pointer";
          chave1.style.cursor = "auto";
          chave1.setAttribute("onclick", "");
          break;
        case 4:
          chave = 1;
          tela.src = "Imagens/Room4Claro.png";
          porta4id.style.cursor = "pointer";
          interruptor.style.cursor = "auto";
          break;
        default:
          alert("Jogo com bugs, por favor, reinicie a página");
          break;
      }
    }

    function clicarvoltar(e) {
      switch (fase) {
        case 0:
          tela.src = "Imagens/Titulo.png";
          tela.setAttribute("usemap", "#menu-map");
          break;
        case 1:
          tela.src = "Imagens/Room1.png";
          tela.setAttribute("usemap", "#room1-map");
          break;
        case 2:
          chave = 1;
          tela.src = "Imagens/Room2Vazia.png";
          tela.setAttribute("usemap", "#room2-map");
          break;
        default:
          alert("Jogo com bugs, por favor, reinicie a página");
          break;
      }
    }

    function testarfase(e) {
      if (chave == 1) {
        proxfase(event);
        chave = 0;
      }
    }
  </script>
</body>
</html>